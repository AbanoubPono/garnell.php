localhost : 5500/index.html

dns ==> google.com  ===> ip address 


http =>> hypetxt transfar protocol
{port == 80}

    <a href="logout.php">ุชุณุฌูู ุงูุฎุฑูุฌ</a>
=====================================================================================
ุงูุงูุถู ุนูู ุงูุงุทูุงู ููุงุฏูู

    <?php
session_start();
$host = "localhost";
$user = "root";
$pass = "";
$dbname = "my_database";
$conn = new mysqli($host, $user, $pass, $dbname);

if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

$jobs = ['manager', 'captain', 'waiter', 'pass boy'];

// ุฅูุจุญุซ
if (isset($_POST['search_code'])) {
    $search_code = $_POST['search_code'];
    $stmt = $conn->prepare("SELECT * FROM users WHERE code = ?");
    $stmt->bind_param("s", $search_code);
    $stmt->execute();
    $result = $stmt->get_result();
    
    while ($user = $result->fetch_assoc()) {
        echo "<tr>
                <td>{$user['id']}</td>
                <td>{$user['name']}</td>
                <td>{$user['code']}</td>
                <td>{$user['role']}</td>
                <td>" . ucfirst($user['job']) . "</td>
                <td>
                    <button class='btn btn-warning btn-sm' onclick=\"editUser({$user['id']}, '{$user['name']}', '{$user['code']}', '{$user['password']}', '{$user['role']}', '{$user['job']}')\">โ ุชุนุฏูู</button>
                    <a class='btn btn-danger btn-sm' href='?delete_user={$user['id']}' onclick=\"return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')\">โ ุญุฐู</a>
                </td>
            </tr>";
    }
    exit;
}



// ุฅุถุงูุฉ ุฃู ุชุนุฏูู ูุณุชุฎุฏู
if (isset($_POST['add_user']) || isset($_POST['edit_user'])) {
    $id = $_POST['id'] ?? null;
    $name = trim($_POST['name']);
    $code = trim($_POST['code']);
    $password = $_POST['password']; 
    $role = $_POST['role'];
    $job = $_POST['job'];

    if (isset($_POST['edit_user']) && $id) {
        if (!empty($_POST['password'])) {
            $password = $_POST['password'];
            $stmt = $conn->prepare("UPDATE users SET name=?, code=?, password=?, role=?, job=? WHERE id=?");
            $stmt->bind_param("sssssi", $name, $code, $password, $role, $job, $id);
        } else {
            $stmt = $conn->prepare("UPDATE users SET name=?, code=?, role=?, job=? WHERE id=?");
            $stmt->bind_param("ssssi", $name, $code, $role, $job, $id);
        }
    } else {
        $stmt = $conn->prepare("INSERT INTO users (name, code, password, role, job) VALUES (?, ?, ?, ?, ?)");
        $stmt->bind_param("sssss", $name, $code, $password, $role, $job);
    }
    
    $stmt->execute();

    // ุฅุนุงุฏุฉ ุงูุชูุฌูู ูููุน ุงูุฅุฑุณุงู ุงููุฒุฏูุฌ ุนูุฏ ุงูุชุญุฏูุซ
    header("Location: " . $_SERVER['PHP_SELF']);
    exit;
}

// ุญุฐู ูุณุชุฎุฏู
if (isset($_GET['delete_user'])) {
    $id = $_GET['delete_user'];
    $conn->query("DELETE FROM users WHERE id=$id");
}

// ุฅุถุงูุฉ ููู ุฌุฏูุฏ ุฃู ุชุนุฏููู
if (isset($_POST['add_file']) || isset($_POST['edit_file'])) {
    $file_name = trim($_POST['file_name']);
    $job = $_POST['job'];
    $file_id = $_POST['file_id'] ?? null;

    if (isset($_POST['edit_file']) && $file_id) {
        $stmt = $conn->prepare("UPDATE files SET file_name=?, allowed_job=? WHERE id=?");
        $stmt->bind_param("ssi", $file_name, $job, $file_id);
    } else {
        $file = $_FILES['file'];
        $allowed_extensions = ['pdf', 'jpg', 'png', 'mp4']; // ุฃููุงุน ุงููููุงุช ุงููุณููุญ ุจูุง
        $file_extension = pathinfo($file['name'], PATHINFO_EXTENSION);

        if (!in_array(strtolower($file_extension), $allowed_extensions)) {
            die("โ ููุน ุงูููู ุบูุฑ ูุณููุญ ุจู!");
        }

        $upload_dir = "uploads/";
        if (!is_dir($upload_dir)) {
            mkdir($upload_dir, 0777, true);
        }

        $file_path = $upload_dir . uniqid() . "." . $file_extension;

        if (move_uploaded_file($file['tmp_name'], $file_path)) {
            $stmt = $conn->prepare("INSERT INTO files (file_name, file_path, allowed_job) VALUES (?, ?, ?)");
            $stmt->bind_param("sss", $file_name, $file_path, $job);
        }
    }
    $stmt->execute();

    // ุฅุนุงุฏุฉ ุงูุชูุฌูู ูููุน ุงูุฅุฑุณุงู ุงููุฒุฏูุฌ ุนูุฏ ุงูุชุญุฏูุซ
    header("Location: " . $_SERVER['PHP_SELF']);
    exit;
}


// ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงููุณุชุฎุฏููู
$users = $conn->query("SELECT * FROM users");
// ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงููููุงุช
$files = $conn->query("SELECT * FROM files");

?>


<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููููุงุช</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
</head>
<body class="bg-light">
<a href="logout.php">ุชุณุฌูู ุงูุฎุฑูุฌ</a>

<div class="container py-5">
    <h2 class="text-center mb-4">ููุญุฉ ุงูุชุญูู ุงููุฑูุฒูู</h2>

    <ul class="nav nav-tabs" id="adminTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="files-tab" data-bs-toggle="tab" data-bs-target="#files" type="button" role="tab">ุฅุฏุงุฑุฉ ุงููููุงุช</button>
        </li>
    </ul>

    <div class="tab-content mt-3" id="adminTabsContent">
        <!-- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู -->
        <div class="card p-4 shadow-sm">
          <form class="row g-3">
              <div class="col-md-6">
              <input type="text" id="search_code" name="search_code" class="form-control" placeholder="ุงุจุญุซ ุจุฑูู ุงูููุฏ">
              </div>
              <div class="col-md-6">
              <button type="button" class="btn btn-primary w-100" onclick="searchUser()">๐ ุจุญุซ</button>
              </div>
          </form>
      </div>
        <div class="tab-pane fade show active" id="users" role="tabpanel">
            <div class="card p-4 shadow-sm">
                <h4 class="text-center">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h4>
                <form method="POST" class="row g-3">
                    <input type="hidden" id="id" name="id">
                    <div class="col-md-6">
                        <input type="text" id="name" name="name" class="form-control" placeholder="ุงูุงุณู" required>
                    </div>
                    <div class="col-md-6">
                        <input type="text" id="code" name="code" class="form-control" placeholder="ุงูููุฏ" required>
                    </div>
                    <div class="col-md-6">
                        <input type="password" id="password" name="password" class="form-control" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                    </div>
                    <div class="col-md-3">
                        <select id="role" name="role" class="form-select">
                            <option value="user">ูุณุชุฎุฏู ุนุงุฏู</option>
                            <option value="admin">ูุฏูุฑ</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select id="user_job" name="job" class="form-select">
                            <?php foreach ($jobs as $job): ?>
                            <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
                            <?php endforeach; ?>
                        </select>
                    </div>
                    <div class="col-md-12">
                        <button type="submit" id="submitBtn" name="add_user" class="btn btn-success w-100">ุฅุถุงูุฉ</button>
                    </div>
                </form>
                <table class="table table-striped table-bordered mt-4">
                    <thead class="table-dark">
                        <tr>
                            <th>#</th>
                            <th>ุงูุงุณู</th>
                            <th>ุงูููุฏ</th>
                            <th>ุงูุฏูุฑ</th>
                            <th>ุงููุธููุฉ</th>
                            <th>ุชุญูู</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php while ($user = $users->fetch_assoc()): ?>
                        <tr>
                            <td><?= $user['id'] ?></td>
                            <td><?= $user['name'] ?></td>
                            <td><?= $user['code'] ?></td>
                            <td><?= $user['role'] ?></td>
                            <td><?= ucfirst($user['job']) ?></td>
                            <td>
                                <button class='btn btn-warning btn-sm' onclick="editUser(<?= $user['id'] ?>, '<?= $user['name'] ?>', '<?= $user['code'] ?>', '<?= $user['password'] ?>', '<?= $user['role'] ?>', '<?= $user['job'] ?>')">โ ุชุนุฏูู</button>
                                <a class='btn btn-danger btn-sm' href="?delete_user=<?= $user['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">โ ุญุฐู</a>
                            </td>
                        </tr>
                        <?php endwhile; ?>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ุฅุฏุงุฑุฉ ุงููููุงุช -->
        <div class="tab-pane fade" id="files" role="tabpanel">
            <div class="card p-4 shadow-sm">
                <h4 class="text-center">ุฅุฏุงุฑุฉ ุงููููุงุช</h4>
                <form method="POST" enctype="multipart/form-data" class="row g-3">
                    <input type="hidden" id="file_id" name="file_id">
                    <div class="col-md-6">
                        <input type="text" id="file_name" name="file_name" class="form-control" placeholder="ุงุณู ุงูููู" required>
                    </div>
                    <div class="col-md-6">
                        <input type="file" name="file" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <select id="file_job" name="job" class="form-select">
                            <?php foreach ($jobs as $job): ?>
                            <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
                            <?php endforeach; ?>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <button type="submit" id="file_submit" name="add_file" class="btn btn-success w-100">ุฅุถุงูุฉ</button>
                    </div>
                </form>
                <table class="table table-striped table-bordered mt-4">
                    <thead class="table-dark">
                        <tr>
                            <th>ุงูุชุณูุณู</th>
                            <th>ุงุณู ุงูููู</th>
                            <th>ุงููุณููุญ ูู</th>
                            <th>ุงูุฑุงุจุท</th>
                            <th>ุงูุชุญูู</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php while ($file = $files->fetch_assoc()): ?>
                        <tr>
                            <td><?= $file['id'] ?></td>
                            <td><?= $file['file_name'] ?></td>
                            <td><?= ucfirst($file['allowed_job']) ?></td>
                            <td><a class="btn btn-primary btn-sm" href="<?= $file['file_path'] ?>" target="_blank">๐ ุนุฑุถ</a></td>
                            <td>
                                <button class='btn btn-warning btn-sm' onclick="editFile(<?= $file['id'] ?>, '<?= $file['file_name'] ?>', '<?= $file['allowed_job'] ?>')">โ ุชุนุฏูู</button>
                                <a class='btn btn-danger btn-sm' href="?delete_file=<?= $file['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">โ ุญุฐู</a>
                            </td>
                        </tr>
                        <?php endwhile; ?>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    function searchUser() {
    let searchCode = document.getElementById("search_code").value.trim();
    if (searchCode === "") {
        alert("ูุฑุฌู ุฅุฏุฎุงู ููุฏ ููุจุญุซ!");
        return;
    }

    let formData = new FormData();
    formData.append("search_code", searchCode);

    fetch(window.location.href, {
        method: "POST",
        body: formData
    })
    .then(response => response.text())
    .then(data => {
        document.querySelector("tbody").innerHTML = data;
    })
    .catch(error => console.error("Error:", error));
}



</script>
    <script>
        function editUser(id, name, code, password, role, job) {
            document.getElementById('id').value = id;
            document.getElementById('name').value = name;
            document.getElementById('code').value = code;
            document.getElementById('password').value = password ;
            document.getElementById('role').value = role;
            document.getElementById('user_job').value = job;
            document.getElementById('submitBtn').name = 'edit_user';
            document.getElementById('submitBtn').textContent = 'ุชุนุฏูู';
        }
    </script>
    <script>
        function editFile(id, name, job) {
            document.getElementById('file_id').value = id;
            document.getElementById('file_name').value = name;
            document.getElementById('file_job').value = job;
            document.getElementById('file_submit').name = 'edit_file';
            document.getElementById('file_submit').textContent = 'ุชุนุฏูู';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
===================================================================================================
ุงูุงูุถู ูููุณุชุฎุฏู

<?php
session_start();
$host = "localhost";
$user = "root";
$pass = "";
$dbname = "my_database";

$conn = new mysqli($host, $user, $pass, $dbname);

if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

// ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
if (!isset($_SESSION['user_id']) || $_SESSION['role'] != 'user') {
    header("Location: login.php");
    exit();
}

$user_name = $_SESSION['name'];
$user_job = $_SESSION['job']; // ุงููุธููุฉ ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู

// ุฌูุจ ุงููููุงุช ุงููุชุงุญุฉ ููุธููุฉ ุงููุณุชุฎุฏู
$sql = "SELECT * FROM files WHERE allowed_job = '$user_job' ORDER BY category";
$result = $conn->query($sql);

$categories = []; // ูุตูููุฉ ูุชุฎุฒูู ุงููููุงุช ุญุณุจ ุงูุชุตููู

if ($result) {
    while ($file = $result->fetch_assoc()) {
        $category = $file['category'] ?? 'other'; // ุชุฌูุจ ุงูุฃุฎุทุงุก ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุชุตููู
        $categories[$category][] = $file;
    }
} else {
    echo "โ ุฎุทุฃ ูู ุฌูุจ ุงููููุงุช: " . $conn->error;
}

?>



<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ุตูุญุฉ ุงููุณุชุฎุฏู</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./Garnell.web/style.css">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 20px; }
        .file-container { width: 80%; margin: auto; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .file-box { border: 1px solid #ddd; padding: 10px; width: 45%; text-align: center; }
        iframe, video { width: 100%; height: 250px; }
    </style>
</head>
<body>

    <h2>ูุฑุญุจูุงุ <?= $user_name ?> ๐</h2>
    <p>ูุธููุชู: <strong><?= ucfirst($user_job) ?></strong></p>
    

    <h3>๐ ุงููููุงุช ุงููุชุงุญุฉ ูู:</h3>
<div class="btn-group mb-3">
    <button class="btn btn-primary" onclick="showCategory('pdf')">๐ PDF</button>
    <button class="btn btn-success" onclick="showCategory('video')">๐ฅ ุงูููุฏูููุงุช</button>
<button class="btn btn-warning" onclick="showCategory('exam')">๐ ุงูุงูุชุญุงู</button>
</div>

<div class="file-container" id="filesContainer">
    <?php foreach ($categories as $category => $files): ?>
        <?php foreach ($files as $file): ?>
            <?php 
                $file_ext = pathinfo($file['file_path'], PATHINFO_EXTENSION);
                $category_type = in_array($file_ext, ['mp4', 'webm', 'ogg']) ? 'video' : ($file_ext == 'pdf' ? 'pdf' : 'other');
            ?>
            <div class="file-box" data-category="<?= $category_type ?>">
                <h4><?= $file['file_name'] ?></h4>
                <?php if ($file_ext == 'pdf'): ?>
                    <div class="d-flex justify-content-center gap-2">
                        <a href="<?= $file['file_path'] ?>" target="_blank" class="btn btn-primary">๐๏ธ ุนุฑุถ</a>
                        <a href="<?= $file['file_path'] ?>" download class="btn btn-success">โฌ๏ธ ุชุญููู</a>
                    </div>
                <?php elseif (in_array($file_ext, ['mp4', 'webm', 'ogg'])): ?>
                    <div class="d-flex justify-content-center gap-2">
                        <a href="<?= $file['file_path'] ?>" target="_blank" class="btn btn-primary">๐๏ธ ุนุฑุถ</a>
                        <a href="<?= $file['file_path'] ?>" download class="btn btn-success">โฌ๏ธ ุชุญููู</a>
                    </div>
                <?php else: ?>
                    <p>โ ููู ุบูุฑ ูุฏุนูู.</p>
                <?php endif; ?>
            </div>
        <?php endforeach; ?>
    <?php endforeach; ?>
</div>


<a href="logout.php">ุชุณุฌูู ุงูุฎุฑูุฌ</a>

<script>
document.addEventListener("DOMContentLoaded", function() {
    let files = document.querySelectorAll('.file-box');
    files.forEach(file => file.style.display = 'none'); // ุฅุฎูุงุก ุฌููุน ุงููููุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
});

function showCategory(category) {
    let files = document.querySelectorAll('.file-box');

    if (category === 'exam') {
        window.location.href = "./Garnell.web/exam.html";
        return; // ุฅููุงู ุชูููุฐ ุจุงูู ุงูููุฏ ุจุนุฏ ุงูุชูุฌูู
    }

    files.forEach(file => {
        file.style.display = (file.getAttribute('data-category') === category) ? 'block' : 'none';
    });
}
</script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>    
</body>
</html>

<?php $conn->close(); ?>

===========================================================================================
<?php
// ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
$host = "localhost";
$user = "root";  
$pass = "";      
$dbname = "my_database"; 

$conn = new mysqli($host, $user, $pass, $dbname);

// ูุญุต ุงูุงุชุตุงู
if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

// ุงููุธุงุฆู ุงููุชุงุญุฉ
$jobs = ['manager', 'captain', 'waiter', 'pass boy'];

// ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
if (isset($_POST['add'])) {
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];

    $sql = "INSERT INTO users (name, code, password, role, job) VALUES ('$name', '$code', '$password', '$role', '$job')";
    $conn->query($sql);
}

// ุชุนุฏูู ุจูุงูุงุช ูุณุชุฎุฏู
if (isset($_POST['edit'])) {
    $id = $_POST['id'];
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];

    $sql = "UPDATE users SET name='$name', code='$code', password='$password', role='$role', job='$job' WHERE id=$id";
    $conn->query($sql);
}

// ุญุฐู ูุณุชุฎุฏู
if (isset($_GET['delete'])) {
    $id = $_GET['delete'];
    $sql = "DELETE FROM users WHERE id=$id";
    $conn->query($sql);
}

// ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช
$sql = "SELECT * FROM users";
$result = $conn->query($sql);
?>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid black; }
        th { background-color: #3498db; color: white; }
        tr:nth-child(even) { background-color: #f1f1f1; }
        form { margin: 20px auto; width: 50%; text-align: center; }
        input, select, button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>

    <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>

    <!-- ูููุฐุฌ ูุฅุถุงูุฉ ุฃู ุชุนุฏูู ุงููุณุชุฎุฏู -->
    <form method="POST">
        <input type="hidden" name="id" id="id">
        <input type="text" name="name" id="name" placeholder="ุงูุงุณู" required>
        <input type="text" name="code" id="code" placeholder="ุงูููุฏ" required>
        <input type="password" name="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
        
        <!-- ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงูุฏูุฑ -->
        <select name="role" id="role">
            <option value="user">ูุณุชุฎุฏู ุนุงุฏู</option>
            <option value="admin">ูุฏูุฑ</option>
        </select>

        <!-- ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงููุธููุฉ -->
        <select name="job" id="job">
            <?php foreach ($jobs as $job): ?>
                <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
            <?php endforeach; ?>
        </select>

        <br><br>
        <button type="submit" name="add">ุฅุถุงูุฉ</button>
        <button type="submit" name="edit">ุชุนุฏูู</button>
    </form>

    <table>
        <tr>
            <th>ุงูุชุณูุณู</th>
            <th>ุงูุงุณู</th>
            <th>ุงูููุฏ</th>
            <th>ูููุฉ ุงููุฑูุฑ</th>
            <th>ุงูุฏูุฑ</th>
            <th>ุงููุธููุฉ</th>
            <th>ุงูุชุญูู</th>
        </tr>
        <?php while ($row = $result->fetch_assoc()): ?>
        <tr>
            <td><?= $row['id'] ?></td>
            <td><?= $row['name'] ?></td>
            <td><?= $row['code'] ?></td>
            <td><?= $row['password'] ?></td>
            <td><?= $row['role'] ?></td>
            <td><?= ucfirst($row['job']) ?></td>
            <td>
                <button onclick="editUser(<?= $row['id'] ?>, '<?= $row['name'] ?>', '<?= $row['code'] ?>', '<?= $row['password'] ?>', '<?= $row['role'] ?>', '<?= $row['job'] ?>')">โ ุชุนุฏูู</button>
                <a href="?delete=<?= $row['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุณุชุฎุฏูุ')">โ ุญุฐู</a>
            </td>
        </tr>
        <?php endwhile; ?>
    </table>

    <script>
        function editUser(id, name, code, password, role, job) {
            document.getElementById('id').value = id;
            document.getElementById('name').value = name;
            document.getElementById('code').value = code;
            document.getElementById('password').value = password;
            document.getElementById('role').value = role;
            document.getElementById('job').value = job;
        }
    </script>

</body>
</html>

<?php
$conn->close();
?>

===========================================================================================
<?php
// ุจูุงูุงุช ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
$host = "localhost";
$user = "root";  // ุงุณู ุงููุณุชุฎุฏู
$pass = "";      // ูููุฉ ุงููุฑูุฑ
$dbname = "your_database"; // ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช

// ุฅูุดุงุก ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
$conn = new mysqli($host, $user, $pass, $dbname);

// ูุญุต ุงูุงุชุตุงู
if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู: " . $conn->connect_error);
}

// ุงุณุชุนูุงู ูุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช
$sql = "SELECT id, name, code, password FROM users";
$result = $conn->query($sql);
?>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุนุฑุถ ุงููุณุชุฎุฏููู</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 70%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid black; }
        th { background-color: #f4a261; color: white; }
        tr:nth-child(even) { background-color: #f1f1f1; }
    </style>
</head>
<body>

    <h2>ูุงุฆูุฉ ุงููุณุชุฎุฏููู</h2>
    <table>
        <tr>
            <th>ุงูุชุณูุณู</th>
            <th>ุงูุงุณู</th>
            <th>ุงูููุฏ</th>
            <th>ูููุฉ ุงููุฑูุฑ</th>
        </tr>
        <?php
        if ($result->num_rows > 0) {
            while ($row = $result->fetch_assoc()) {
                echo "<tr>
                        <td>{$row['id']}</td>
                        <td>{$row['name']}</td>
                        <td>{$row['code']}</td>
                        <td>{$row['password']}</td>
                      </tr>";
            }
        } else {
            echo "<tr><td colspan='4'>ูุง ุชูุฌุฏ ุจูุงูุงุช</td></tr>";
        }
        $conn->close();
        ?>
    </table>

</body>
</html>
==============================================================================================================
==============================================================================================================
ุงูุถู ูุง ูุตู ูู ูู ุตูุญู ุงูุงุฏูู
<?php
// ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
$host = "localhost";
$user = "root";  
$pass = "";      
$dbname = "my_database"; 

$conn = new mysqli($host, $user, $pass, $dbname);

// ูุญุต ุงูุงุชุตุงู
if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

// ุงููุธุงุฆู ุงููุชุงุญุฉ
$jobs = ['manager', 'captain', 'waiter', 'pass boy'];

// ุงูุจุญุซ ุนู ูุณุชุฎุฏู ุจุงูููุฏ
$search_code = "";
if (isset($_POST['search'])) {
    $search_code = $_POST['search_code'];
}

// ุฌูุจ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
$sql = "SELECT * FROM users";
if (!empty($search_code)) {
    $sql .= " WHERE code LIKE '%$search_code%'";
}
$result = $conn->query($sql);

// ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
if (isset($_POST['add'])) {
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];

    $sql = "INSERT INTO users (name, code, password, role, job) VALUES ('$name', '$code', '$password', '$role', '$job')";
    $conn->query($sql);
}

// ุชุนุฏูู ุจูุงูุงุช ูุณุชุฎุฏู
if (isset($_POST['edit'])) {
    $id = $_POST['id'];
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];

    $sql = "UPDATE users SET name='$name', code='$code', password='$password', role='$role', job='$job' WHERE id=$id";
    $conn->query($sql);
}

// ุญุฐู ูุณุชุฎุฏู
if (isset($_GET['delete'])) {
    $id = $_GET['delete'];
    $sql = "DELETE FROM users WHERE id=$id";
    $conn->query($sql);
}
?>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid black; }
        th { background-color: #3498db; color: white; }
        tr:nth-child(even) { background-color: #f1f1f1; }
        form { margin: 20px auto; width: 50%; text-align: center; }
        input, select, button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>

    <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
    <!-- ูููุฐุฌ ููุจุญุซ ุนู ุงููุณุชุฎุฏููู -->
    <form method="POST">
        <input type="text" name="search_code" placeholder="ุงุจุญุซ ุจุฑูู ุงูููุฏ" value="<?= $search_code ?>">
        <button type="submit" name="search">๐ ุจุญุซ</button>
    </form>

    <!-- ูููุฐุฌ ูุฅุถุงูุฉ ุฃู ุชุนุฏูู ุงููุณุชุฎุฏู -->
    <form method="POST">
        <input type="hidden" name="id" id="id">
        <input type="text" name="name" id="name" placeholder="ุงูุงุณู" required>
        <input type="text" name="code" id="code" placeholder="ุงูููุฏ" required>
        <input type="password" name="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
        
        <!-- ุงุฎุชูุงุฑ ุงูุฏูุฑ -->
        <select name="role" id="role">
            <option value="user">ูุณุชุฎุฏู ุนุงุฏู</option>
            <option value="admin">ูุฏูุฑ</option>
        </select>

        <!-- ุงุฎุชูุงุฑ ุงููุธููุฉ -->
        <select name="job" id="job">
            <?php foreach ($jobs as $job): ?>
                <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
            <?php endforeach; ?>
        </select>

        <br><br>
        <button type="submit" name="add">ุฅุถุงูุฉ</button>
        <button type="submit" name="edit">ุชุนุฏูู</button>
    </form>

    <table>
        <tr>
            <th>ุงูุชุณูุณู</th>
            <th>ุงูุงุณู</th>
            <th>ุงูููุฏ</th>
            <th>ูููุฉ ุงููุฑูุฑ</th>
            <th>ุงูุฏูุฑ</th>
            <th>ุงููุธููุฉ</th>
            <th>ุงูุชุญูู</th>
        </tr>
        <?php while ($row = $result->fetch_assoc()): ?>
        <tr>
            <td><?= $row['id'] ?></td>
            <td><?= $row['name'] ?></td>
            <td><?= $row['code'] ?></td>
            <td><?= $row['password'] ?></td>
            <td><?= $row['role'] ?></td>
            <td><?= ucfirst($row['job']) ?></td>
            <td>
                <button onclick="editUser(<?= $row['id'] ?>, '<?= $row['name'] ?>', '<?= $row['code'] ?>', '<?= $row['password'] ?>', '<?= $row['role'] ?>', '<?= $row['job'] ?>')">โ ุชุนุฏูู</button>
                <a href="?delete=<?= $row['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุณุชุฎุฏูุ')">โ ุญุฐู</a>
            </td>
        </tr>
        <?php endwhile; ?>
    </table>

    <script>
        function editUser(id, name, code, password, role, job) {
            document.getElementById('id').value = id;
            document.getElementById('name').value = name;
            document.getElementById('code').value = code;
            document.getElementById('password').value = password;
            document.getElementById('role').value = role;
            document.getElementById('job').value = job;
        }
    </script>

</body>
</html>

<?php
$conn->close();
?>
====================================================================================================================
<?php
session_start();
$host = "localhost";
$user = "root";
$pass = "";
$dbname = "my_database";
$conn = new mysqli($host, $user, $pass, $dbname);

if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

// ุงููุธุงุฆู ุงููุชุงุญุฉ
$jobs = ['manager', 'captain', 'waiter', 'pass boy'];

// ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
if (isset($_POST['add_user'])) {
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];
    
    $sql = "INSERT INTO users (name, code, password, role, job) VALUES ('$name', '$code', '$password', '$role', '$job')";
    $conn->query($sql);
}

// ุชุนุฏูู ุจูุงูุงุช ูุณุชุฎุฏู
if (isset($_POST['edit_user'])) {
    $id = $_POST['id'];
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];

    $sql = "UPDATE users SET name='$name', code='$code', password='$password', role='$role', job='$job' WHERE id=$id";
    $conn->query($sql);
}

// ุญุฐู ูุณุชุฎุฏู
if (isset($_GET['delete_user'])) {
    $id = $_GET['delete_user'];
    $sql = "DELETE FROM users WHERE id=$id";
    $conn->query($sql);
}

// ุฑูุน ุงููููุงุช
if (isset($_POST['upload'])) {
    $allowed_types = ['pdf' => 'application/pdf', 'video' => 'video/mp4'];
    
    $file = $_FILES['file'];
    $job = $_POST['job'];
    $file_type = explode("/", $file['type'])[0] == 'video' ? 'video' : 'pdf';

    if (!in_array($file['type'], $allowed_types)) {
        echo "ููุน ุงูููู ุบูุฑ ูุฏุนูู!";
    } else {
        $upload_dir = "uploads/";
        $file_path = $upload_dir . basename($file['name']);
        
        if (move_uploaded_file($file['tmp_name'], $file_path)) {
            $sql = "INSERT INTO files (file_name, file_type, file_path, allowed_job) VALUES 
                    ('{$file['name']}', '$file_type', '$file_path', '$job')";
            $conn->query($sql);
            echo "ุชู ุฑูุน ุงูููู ุจูุฌุงุญ!";
        } else {
            echo "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฑูุน ุงูููู!";
        }
    }
}

// ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏููู ูุงููููุงุช
$users = $conn->query("SELECT * FROM users");
$files = $conn->query("SELECT * FROM files");
?>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ููุญุฉ ุชุญูู ุงูุฃุฏูู</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid black; }
        th { background-color: #3498db; color: white; }
        tr:nth-child(even) { background-color: #f1f1f1; }
        form { margin: 20px auto; width: 60%; }
        input, select, button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>

    <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
    <form method="POST">
        <input type="hidden" name="id" id="id">
        <input type="text" name="name" id="name" placeholder="ุงูุงุณู" required>
        <input type="text" name="code" id="code" placeholder="ุงูููุฏ" required>
        <input type="text" name="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
        <select name="role">
            <option value="user">ูุณุชุฎุฏู ุนุงุฏู</option>
            <option value="admin">ูุฏูุฑ</option>
        </select>
        <select name="job">
            <?php foreach ($jobs as $job): ?>
                <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
            <?php endforeach; ?>
        </select>
        <br><br>
        <button type="submit" name="add_user">ุฅุถุงูุฉ</button>
        <button type="submit" name="edit_user">ุชุนุฏูู</button>
    </form>

    <table>
        <tr>
            <th>ุงูุชุณูุณู</th>
            <th>ุงูุงุณู</th>
            <th>ุงูููุฏ</th>
            <th>ูููุฉ ุงููุฑูุฑ</th>
            <th>ุงูุฏูุฑ</th>
            <th>ุงููุธููุฉ</th>
            <th>ุงูุชุญูู</th>
        </tr>
        <?php while ($row = $users->fetch_assoc()): ?>
        <tr>
            <td><?= $row['id'] ?></td>
            <td><?= $row['name'] ?></td>
            <td><?= $row['code'] ?></td>
            <td><?= $row['password'] ?></td>
            <td><?= $row['role'] ?></td>
            <td><?= $row['job'] ?></td>
            <td>
                <button onclick="editUser(<?= $row['id'] ?>, '<?= $row['name'] ?>', '<?= $row['code'] ?>', '<?= $row['password'] ?>', '<?= $row['role'] ?>', '<?= $row['job'] ?>')">ุชุนุฏูู</button>
                <a href="?delete_user=<?= $row['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏุ')">โ ุญุฐู</a>
            </td>
        </tr>
        <?php endwhile; ?>
    </table>

    <h2>ุฑูุน ูููุงุช PDF ุงู Madia</h2>
    <form method="POST" enctype="multipart/form-data">
        <input type="file" name="file" required>
        <select name="job">
            <?php foreach ($jobs as $job): ?>
                <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
            <?php endforeach; ?>
        </select>
        <button type="submit" name="upload">ุฑูุน</button>
    </form>

    <h2>ุงููููุงุช ุงููุฑููุนุฉ</h2>
    <table>
        <tr>
            <th>ุงุณู ุงูููู</th>
            <th>ุงูููุน</th>
            <th>ุงููุณููุญ ูู</th>
            <th>ุชุงุฑูุฎ ุงูุฑูุน</th>
        </tr>
        <?php while ($file = $files->fetch_assoc()): ?>
        <tr>
            <td><a href="<?= $file['file_path'] ?>" target="_blank"><?= $file['file_name'] ?></a></td>
            <td><?= $file['file_type'] == 'pdf' ? '๐ PDF' : '๐ฅ ููุฏูู' ?></td>
            <td><?= ucfirst($file['allowed_job']) ?></td>
            <td><?= $file['uploaded_at'] ?></td>
        </tr>
        <?php endwhile; ?>
    </table>

    <script>
        function editUser(id, name, code, password, role, job) {
            document.getElementById('id').value = id;
            document.getElementById('name').value = name;
            document.getElementById('code').value = code;
            document.getElementById('password').value = password;
            document.getElementById('role').value = role;
            document.getElementById('job').value = job;
        }
    </script>

</body>
</html>

<?php $conn->close(); ?>
=====================================================================================================================
ุฑูุน ุงูููู
<?php
session_start();
$host = "localhost";
$user = "root";
$pass = "";
$dbname = "my_database";
$conn = new mysqli($host, $user, $pass, $dbname);

if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

$jobs = ['manager', 'captain', 'waiter', 'pass boy'];

// ุฅุถุงูุฉ ููู ุฌุฏูุฏ
if (isset($_POST['add_file'])) {
    $file_name = $_POST['file_name'];
    $job = $_POST['job'];
    $file = $_FILES['file'];

    $upload_dir = "uploads/";
    $file_path = $upload_dir . basename($file['name']);

    if (move_uploaded_file($file['tmp_name'], $file_path)) {
        $sql = "INSERT INTO file (file_name, file_path, allowed_job) VALUES ('$file_name', '$file_path', '$job')";
        $conn->query($sql);
    }
}

// ุชุนุฏูู ููู
if (isset($_POST['edit_file'])) {
    $id = $_POST['id'];
    $file_name = $_POST['file_name'];
    $job = $_POST['job'];

    $sql = "UPDATE file SET file_name='$file_name', allowed_job='$job' WHERE id=$id";
    $conn->query($sql);
}

// ุญุฐู ููู
if (isset($_GET['delete_file'])) {
    $id = $_GET['delete_file'];
    $sql = "DELETE FROM file WHERE id=$id";
    $conn->query($sql);
}

$files = $conn->query("SELECT * FROM files");
?>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ุฅุฏุงุฑุฉ ุงููููุงุช</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid black; }
        th { background-color: #3498db; color: white; }
        form { margin: 20px auto; width: 60%; }
        input, select, button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>

    <h2>ุฅุฏุงุฑุฉ ุงููููุงุช</h2>
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="id" id="file_id">
        <input type="text" name="file_name" id="file_name" placeholder="ุงุณู ุงูููู" required>
        <input type="file" name="file" id="file">
        <select name="job" id="job">
            <?php foreach ($jobs as $job): ?>
                <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
            <?php endforeach; ?>
        </select>
        <br><br>
        <button type="submit" name="add_file">ุฅุถุงูุฉ</button>
        <button type="submit" name="edit_file">ุชุนุฏูู</button>
    </form>

    <table>
        <tr>
            <th>ุงูุชุณูุณู</th>
            <th>ุงุณู ุงูููู</th>
            <th>ุงููุณููุญ ูู</th>
            <th>ุงูุฑุงุจุท</th>
            <th>ุงูุชุญูู</th>
        </tr>
        <?php while ($file = $files->fetch_assoc()): ?>
        <tr>
            <td><?= $file['id'] ?></td>
            <td><?= $file['file_name'] ?></td>
            <td><?= ucfirst($file['allowed_job']) ?></td>
            <td><a href="<?= $file['file_path'] ?>" target="_blank">ุนุฑุถ</a></td>
            <td>
                <button onclick="editFile(<?= $file['id'] ?>, '<?= $file['file_name'] ?>', '<?= $file['allowed_job'] ?>')">โ ุชุนุฏูู</button>
                <a href="?delete_file=<?= $file['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏุ')">โ ุญุฐู</a>
            </td>
        </tr>
        <?php endwhile; ?>
    </table>

    <script>
        function editFile(id, name, job) {
            document.getElementById('file_id').value = id;
            document.getElementById('file_name').value = name;
            document.getElementById('job').value = job;
        }
    </script>
</body>
</html>

<?php $conn->close(); ?>
====================================================================================================
ููุฏ ุงุฏุงุฑู ูุณุชุฎุฏู BOOTSTRAP
<?php
session_start();
$host = "localhost";
$user = "root";
$pass = "";
$dbname = "my_database";
$conn = new mysqli($host, $user, $pass, $dbname);

if ($conn->connect_error) {
    die("ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: " . $conn->connect_error);
}

$jobs = ['manager', 'captain', 'waiter', 'pass boy'];

// ุงูุจุญุซ ุนู ูุณุชุฎุฏู ุจุงูููุฏ
if (isset($_POST['search_code'])) {
    $search_code = $_POST['search_code'];
    $sql = "SELECT * FROM users WHERE code LIKE '%$search_code%'";
    $result = $conn->query($sql);
    while ($user = $result->fetch_assoc()) {
        echo "<tr>
                <td>{$user['id']}</td>
                <td>{$user['name']}</td>
                <td>{$user['code']}</td>
                <td>{$user['role']}</td>
                <td>" . ucfirst($user['job']) . "</td>
                <td>
                    <button class='btn btn-warning btn-sm' onclick=\"editUser({$user['id']}, '{$user['name']}', '{$user['code']}', '{$user['password']}', '{$user['role']}', '{$user['job']}')\">โ ุชุนุฏูู</button>
                    <a class='btn btn-danger btn-sm' href='?delete_user={$user['id']}' onclick=\"return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')\">โ ุญุฐู</a>
                </td>
            </tr>";
    }
    exit;
}

// ุฅุถุงูุฉ ุฃู ุชุนุฏูู ูุณุชุฎุฏู
if (isset($_POST['add_user']) || isset($_POST['edit_user'])) {
    $id = $_POST['id'] ?? null;
    $name = $_POST['name'];
    $code = $_POST['code'];
    $password = $_POST['password'];
    $role = $_POST['role'];
    $job = $_POST['job'];
    
    if (isset($_POST['edit_user']) && $id) {
        $sql = "UPDATE users SET name='$name', code='$code', password='$password', role='$role', job='$job' WHERE id=$id";
    } else {
        $sql = "INSERT INTO users (name, code, password, role, job) VALUES ('$name', '$code', '$password', '$role', '$job')";
    }
    $conn->query($sql);
}

// ุญุฐู ูุณุชุฎุฏู
if (isset($_GET['delete_user'])) {
    $id = $_GET['delete_user'];
    $conn->query("DELETE FROM users WHERE id=$id");
}

// ุฅุถุงูุฉ ููู ุฌุฏูุฏ ุฃู ุชุนุฏููู
if (isset($_POST['add_file']) || isset($_POST['edit_file'])) {
    $file_name = $_POST['file_name'];
    $job = $_POST['job'];
    $file_id = $_POST['file_id'] ?? null;

    if (isset($_POST['edit_file']) && $file_id) {
        $sql = "UPDATE files SET file_name='$file_name', allowed_job='$job' WHERE id=$file_id";
    } else {
        $file = $_FILES['file'];
        $upload_dir = "uploads/";
        if (!is_dir($upload_dir)) {
            mkdir($upload_dir, 0777, true);
        }
        $file_path = $upload_dir . basename($file['name']);

        if (move_uploaded_file($file['tmp_name'], $file_path)) {
            $sql = "INSERT INTO files (file_name, file_path, allowed_job) VALUES ('$file_name', '$file_path', '$job')";
        }
    }
    $conn->query($sql);
}
// ุญุฐู ููู
if (isset($_GET['delete_file'])) {
    $id = $_GET['delete_file'];
    $result = $conn->query("SELECT file_path FROM files WHERE id = $id");
    $file = $result->fetch_assoc();
    if (file_exists($file['file_path'])) {
        unlink($file['file_path']);
    }
    $conn->query("DELETE FROM files WHERE id = $id");
}

// ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงููุณุชุฎุฏููู
$users = $conn->query("SELECT * FROM users");
// ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงููููุงุช
$files = $conn->query("SELECT * FROM files");
?>


<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููููุงุช</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
</head>
<body class="bg-light">
    <div class="container py-5">
        <h2 class="text-center mb-4">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
        <div class="card p-4 shadow-sm">
            <form class="row g-3">
                <div class="col-md-6">
                    <input type="text" id="search_code" class="form-control" placeholder="ุงุจุญุซ ุจุฑูู ุงูููุฏ" onkeyup="searchUser()">
                </div>
                <div class="col-md-6">
                    <button type="button" class="btn btn-primary w-100" onclick="searchUser()">๐ ุจุญุซ</button>
                </div>
            </form>
        </div>
        
        <div class="card p-4 shadow-sm mt-4">
            <h4 class="text-center">ุฅุถุงูุฉ / ุชุนุฏูู ูุณุชุฎุฏู</h4>
            <form method="POST" class="row g-3">
                <input type="hidden" id="id" name="id">
                <div class="col-md-6">
                    <input type="text" id="name" name="name" class="form-control" placeholder="ุงูุงุณู" required>
                </div>
                <div class="col-md-6">
                    <input type="text" id="code" name="code" class="form-control" placeholder="ุงูููุฏ" required>
                </div>
                <div class="col-md-6">
                    <input type="password" id="password" name="password" class="form-control" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                </div>
                <div class="col-md-3">
                    <select id="role" name="role" class="form-select">
                        <option value="user">ูุณุชุฎุฏู ุนุงุฏู</option>
                        <option value="admin">ูุฏูุฑ</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select id="job" name="job" class="form-select">
                        <?php foreach ($jobs as $job): ?>
                            <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
                        <?php endforeach; ?>
                    </select>
                </div>
                <div class="col-md-12">
                    <button type="submit" id="submitBtn" name="add_user" class="btn btn-success w-100">ุฅุถุงูุฉ</button>
                </div>
            </form>
        </div>
    
        <table class="table table-striped table-bordered mt-4">
            <thead class="table-dark">
                <tr>
                    <th>#</th>
                    <th>ุงูุงุณู</th>
                    <th>ุงูููุฏ</th>
                    <th>ุงูุฏูุฑ</th>
                    <th>ุงููุธููุฉ</th>
                    <th>ุชุญูู</th>
                </tr>
            </thead>
            <tbody>
                <?php while ($user = $users->fetch_assoc()): ?>
                <tr>
                    <td><?= $user['id'] ?></td>
                    <td><?= $user['name'] ?></td>
                    <td><?= $user['code'] ?></td>
                    <td><?= $user['role'] ?></td>
                    <td><?= ucfirst($user['job']) ?></td>
                    <td>
                        <button class='btn btn-warning btn-sm' onclick="editUser(<?= $user['id'] ?>, '<?= $user['name'] ?>', '<?= $user['code'] ?>', '<?= $user['password'] ?>', '<?= $user['role'] ?>', '<?= $user['job'] ?>')">โ ุชุนุฏูู</button>
                        <a class='btn btn-danger btn-sm' href="?delete_user=<?= $user['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">โ ุญุฐู</a>
                    </td>
                </tr>
                <?php endwhile; ?>
            </tbody>
        </table>
    </div>


    
<div class="container py-5">
    <h2 class="text-center mb-4">ุฅุฏุงุฑุฉ ุงููููุงุช</h2>
    
    <div class="card p-4 shadow-sm">
        <h4 class="text-center">ุฅุถุงูุฉ / ุชุนุฏูู ููู</h4>
        <form method="POST" enctype="multipart/form-data" class="row g-3">
            <input type="hidden" id="file_id" name="file_id">
            <div class="col-md-6">
                <input type="text" id="file_name" name="file_name" class="form-control" placeholder="ุงุณู ุงูููู" required>
            </div>
            <div class="col-md-6">
                <input type="file" name="file" class="form-control" required>
            </div>
            <div class="col-md-6">
                <select id="job" name="job" class="form-select">
                    <?php foreach ($jobs as $job): ?>
                        <option value="<?= $job ?>"><?= ucfirst($job) ?></option>
                    <?php endforeach; ?>
                </select>
            </div>
            <div class="col-md-6">
                <button type="submit" id="file_submit" name="add_file" class="btn btn-success w-100">ุฅุถุงูุฉ</button>
            </div>
        </form>
    </div>
    
    <table class="table table-striped table-bordered mt-4">
        <thead class="table-dark">
            <tr>
                <th>ุงูุชุณูุณู</th>
                <th>ุงุณู ุงูููู</th>
                <th>ุงููุณููุญ ูู</th>
                <th>ุงูุฑุงุจุท</th>
                <th>ุงูุชุญูู</th>
            </tr>
        </thead>
        <tbody>
            <?php while ($file = $files->fetch_assoc()): ?>
            <tr>
                <td><?= $file['id'] ?></td>
                <td><?= $file['file_name'] ?></td>
                <td><?= ucfirst($file['allowed_job']) ?></td>
                <td><a class="btn btn-primary btn-sm" href="<?= $file['file_path'] ?>" target="_blank">๐ ุนุฑุถ</a></td>
                <td>
                    <button class='btn btn-warning btn-sm' onclick="editFile(<?= $file['id'] ?>, '<?= $file['file_name'] ?>', '<?= $file['allowed_job'] ?>')">โ ุชุนุฏูู</button>
                    <a class='btn btn-danger btn-sm' href="?delete_file=<?= $file['id'] ?>" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">โ ุญุฐู</a>
                </td>
            </tr>
            <?php endwhile; ?>
        </tbody>
    </table>
</div>

<script>
    function editFile(id, name, job) {
        document.getElementById('file_id').value = id;
        document.getElementById('file_name').value = name;
        document.getElementById('job').value = job;
        document.getElementById('file_submit').name = 'edit_file';
        document.getElementById('file_submit').textContent = 'ุชุนุฏูู';
    }
</script>

    <script>
        function editUser(id, name, code, password, role, job) {
            document.getElementById('id').value = id;
            document.getElementById('name').value = name;
            document.getElementById('code').value = code;
            document.getElementById('password').value = password;
            document.getElementById('role').value = role;
            document.getElementById('job').value = job;
            document.getElementById('submitBtn').name = 'edit_user';
            document.getElementById('submitBtn').textContent = 'ุชุนุฏูู';
        }
    </script>
    <script>
        function editFile(id, name, job) {
            document.getElementById('file_id').value = id;
            document.getElementById('file_name').value = name;
            document.getElementById('job').value = job;
            document.getElementById('file_submit').name = 'edit_file';
            document.getElementById('file_submit').textContent = 'ุชุนุฏูู';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
